{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації https://flatpickr.js.org/getting-started/\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Convert MS function\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconst timer = {\n    userSelectedDate: null,\n    intervalId: null,\n    elements: {\n        days: document.querySelector('span[data-days]'),\n        hours: document.querySelector('span[data-hours]'),\n        minutes: document.querySelector('span[data-minutes]'),\n        seconds: document.querySelector('span[data-seconds]'),\n    },\n\n    start() {\n        this.intervalId = setInterval(() => {\n            const timeLeft = this.userSelectedDate.getTime() - Date.now();\n            \n            if (timeLeft <= 0) {\n                this.stop();\n                return\n            }\n\n            const { days, hours, minutes, seconds } = convertMs(timeLeft);\n            this.elements.days.textContent = this.addLeadingZero(days);\n            this.elements.hours.textContent = this.addLeadingZero(hours);\n            this.elements.minutes.textContent = this.addLeadingZero(minutes);\n            this.elements.seconds.textContent = this.addLeadingZero(seconds);\n\n            \n        }, 1000);\n\n    },\n\n    stop() {\n        clearInterval(this.intervalId);\n    },\n\n    addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n    },\n}\n\n// Input: Date selection\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    enableSeconds: false,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0].getTime() - options.defaultDate.getTime() <= 0) {\n            iziToast.show({\n                message: 'Please choose a date in the future',\n                backgroundColor: 'red',\n                messageColor: 'white',\n                position: 'topRight',\n                progressBar: false,\n                close: false,\n            });\n            btnStart.setAttribute('disabled',``)\n            return\n        }\n        btnStart.removeAttribute('disabled');\n        iziToast.destroy();\n        timer.userSelectedDate = selectedDates[0];\n    },\n}\n    \nflatpickr(\"#datetime-picker\", options);\n\nconst btnStart = document.querySelector('button[data-start]')\nbtnStart.addEventListener(\"click\", event => timer.start());\n\n\n\n\n// console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n// console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n// console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\n\n\n"],"names":["convertMs","ms","days","hours","minutes","seconds","timer","timeLeft","value","options","selectedDates","iziToast","btnStart","flatpickr","event"],"mappings":"4xBAQA,SAASA,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,MAAMC,EAAQ,CACV,iBAAkB,KAClB,WAAY,KACZ,SAAU,CACN,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,CACvD,EAED,OAAQ,CACJ,KAAK,WAAa,YAAY,IAAM,CAChC,MAAMC,EAAW,KAAK,iBAAiB,QAAO,EAAK,KAAK,MAExD,GAAIA,GAAY,EAAG,CACf,KAAK,KAAI,EACT,MACH,CAED,KAAM,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUO,CAAQ,EAC5D,KAAK,SAAS,KAAK,YAAc,KAAK,eAAeL,CAAI,EACzD,KAAK,SAAS,MAAM,YAAc,KAAK,eAAeC,CAAK,EAC3D,KAAK,SAAS,QAAQ,YAAc,KAAK,eAAeC,CAAO,EAC/D,KAAK,SAAS,QAAQ,YAAc,KAAK,eAAeC,CAAO,CAGlE,EAAE,GAAI,CAEV,EAED,MAAO,CACH,cAAc,KAAK,UAAU,CAChC,EAED,eAAeG,EAAO,CACtB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACnC,CACL,EAGMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,cAAe,GACf,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,GAAIA,EAAc,CAAC,EAAE,QAAO,EAAKD,EAAQ,YAAY,QAAS,GAAI,EAAG,CACjEE,EAAS,KAAK,CACV,QAAS,qCACT,gBAAiB,MACjB,aAAc,QACd,SAAU,WACV,YAAa,GACb,MAAO,EACvB,CAAa,EACDC,EAAS,aAAa,WAAW,EAAE,EACnC,MACH,CACDA,EAAS,gBAAgB,UAAU,EACnCD,EAAS,QAAO,EAChBL,EAAM,iBAAmBI,EAAc,CAAC,CAC3C,CACL,EAEAG,EAAU,mBAAoBJ,CAAO,EAErC,MAAMG,EAAW,SAAS,cAAc,oBAAoB,EAC5DA,EAAS,iBAAiB,QAASE,GAASR,EAAM,MAAO,CAAA"}